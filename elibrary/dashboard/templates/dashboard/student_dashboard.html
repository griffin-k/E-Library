{% extends 'dashboard/base.html' %}

{% block title %}E-Library Portal{% endblock %}

{% block content %}
{% load static %}
<script>window.groqApiKey = "{{ groq_api_key }}";</script>
<script src="{% static 'dashboard/chatbot.js' %}"></script>

<style>
  .carousel {
    overflow: hidden;
    position: relative;
    width: 100%;
  }

  .carousel-inner {
    display: flex;
    transition: transform 0.5s linear;
    will-change: transform;
  }

  .carousel-item {
    min-width: 30%;
    box-sizing: border-box;
    text-align: center;
    padding: 20px;
  }

  /* Remove transition when resetting */
  .no-transition {
    transition: none !important;
  }


  .book-card {
    transition: all 0.3s ease;
    border-radius: 10px;
    overflow: hidden;

  }

  .book-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  }

  .category-card {
    transition: all 0.3s ease;
    padding: 20px;
    background-color: white;
    text-align: center;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .category-card:hover {
    transform: scale(1.05);
    background-color: #f8f9fa;
  }

  .real-time-update {
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
</style>

<!-- Hero Section with Animated Background -->
<div class="p-2 h-80 bg-image rounded-lg mx-3 my-5 relative overflow-hidden" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(https://plus.unsplash.com/premium_photo-1682284548106-3e589faff54f?q=80&w=2670&auto=format&fit=crop)">
  <div class="text-center mt-8">
    <h1 class="text-white text-4xl font-bold animate-fadeIn">Welcome to Your E-Library</h1>
    <p class="text-white text-xl mt-2">Discover, Read, and Grow</p>
  </div>
  <form action="{% url 'browse_books' %}" method="GET" class="mt-12">
    <div class="mx-auto relative bg-white max-w-3xl flex items-center border py-2 px-3 rounded-full shadow-2xl">
      <input id="search-bar" name="search_text" placeholder="Search books, authors, or topics..." class="px-5 py-2 w-full rounded-full flex-1 outline-none border-none bg-transparent focus:ring-0" />
      <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-800 transition-colors">Search</button>
    </div>
</form>
</div>

<!-- Real-Time Book Updates Banner -->
<div class="container mx-auto px-5 my-5">
  <div class="bg-indigo-100 p-4 rounded-lg flex items-center justify-between">
    <div>
      <span class="text-red-800 font-semibold">Real-Time Update:</span>
      <span class="ml-2">New books added today: <span class="real-time-update font-bold">3</span></span>
    </div>
    <a href="{%url 'newarivals'%}" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
        View New Arrivals
    </a>
    <!-- <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">View New Arrivals</button> -->
  </div>
</div>

<!-- Category Section with Icons -->
<div class="container mx-auto px-5 my-10">
  <h2 class="text-2xl font-bold mb-6 text-center">Explore by Category</h2>
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-6">
    <a href="{% url 'browse_books' %}" class="category-card">üìñ Fiction</a>
    <a href="{% url 'browse_books' %}" class="category-card">üî¨ Science</a>
    <a href="{% url 'browse_books' %}" class="category-card">üèõÔ∏è History</a>
    <a href="{% url 'browse_books' %}" class="category-card">üíº Business</a>
    <a href="{% url 'browse_books' %}" class="category-card">üé® Art & Design</a>
    <a href="{% url 'browse_books' %}" class="category-card">üìö Literature</a>
    <a href="{% url 'browse_books' %}" class="category-card">üîç Research</a>
    <a href="{% url 'browse_books' %}" class="category-card">üöÄ Technology</a>
    <a href="{% url 'browse_books' %}" class="category-card">üß† Self-Help</a>
    <a href="{% url 'browse_books' %}" class="category-card">üåç Travel</a>
  </div>
</div>


<!-- Featured Books Carousel -->
<div class="carousel">
    <div class="carousel-inner">
       <div class="carousel-item book-card">
        <img src="{% static 'images/1.jpg' %}" alt="Book 1">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/2.jpg' %}" alt="Book 2">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/3.jpg' %}" alt="Book 3">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/4.jpg' %}" alt="Book 4">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/5.jpg' %}" alt="Book 5">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/1.jpg' %}" alt="Book 6">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/2.jpg' %}" alt="Book 7">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/3.jpg' %}" alt="Book 1">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/4.jpg' %}" alt="Book 2">
    </div>
    <div class="carousel-item book-card">
        <img src="{% static 'images/5.jpg' %}" alt="Book 3">
    </div>
      </div>
      

<!-- Trending Books Section -->
<div class="container mx-auto px-5 my-10">
  <h2 class="text-2xl font-bold mb-6 text-center">Trending Now</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
    
    <a href="{% url 'browse_books' %}">
      <div class="book-card bg-white shadow-lg p-4 hover:shadow-xl transition-shadow">
        <img src="{% static 'images/3.jpg' %}" alt="1984" class="rounded-lg mb-3">
        <h3 class="font-semibold">To Kill a Mockingbird</h3>
        <p class="text-gray-600">Harper Lee</p>
      </div>
    </a>

    <a href="{% url 'browse_books' %}">
      <div class="book-card bg-white shadow-lg p-4 hover:shadow-xl transition-shadow">
        <img src="{% static 'images/5.jpg' %}" alt="1984" class="rounded-lg mb-3">
        <h3 class="font-semibold">1984</h3>
        <p class="text-gray-600">George Orwell</p>
      </div>
    </a>

    
    <a href="{% url 'browse_books' %}">
      <div class="book-card bg-white shadow-lg p-4 hover:shadow-xl transition-shadow">
        <img src="{% static 'images/4.jpg' %}" alt="1984" class="rounded-lg mb-3">
        <h3 class="font-semibold">Pride and Prejudice </h3>
        <p class="text-gray-600">Jane Austen</p>
      </div>
    </a>

    <a href="{% url 'browse_books' %}">
      <div class="book-card bg-white shadow-lg p-4 hover:shadow-xl transition-shadow">
        <img src="{% static 'images/6.jpg' %}" alt="1984" class="rounded-lg mb-3">
        <h3 class="font-semibold">The Great Gatsby</h3>
        <p class="text-gray-600">F. Scott Fitzgerald</p>
      </div>
    </a>

  </div>
</div>






<!-- Recently Added Books -->
<div class="container mx-auto px-5 my-10">
  <h2 class="text-2xl font-bold mb-6 text-center">Recently Added</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    
    <!-- Book 1 -->
    <a href="{% url 'book_cover1'  %}" class="book-card bg-white shadow-lg p-5 hover:shadow-2xl transition-shadow duration-300">
      <img src="{% static 'images/1.jpg' %}" alt="Deep Work" class="rounded-lg mb-3">
      <h3 class="font-semibold">Deep Work</h3>
      <p class="text-gray-600">Cal Newport</p>
      <p class="text-sm text-red-600">Added: Mar 08, 2025</p>
    </a>
    
    <!-- Book 2 -->
    <a href="{% url 'book_cover2' %}" class="book-card bg-white shadow-lg p-5 hover:shadow-2xl transition-shadow duration-300">
      <img src="{% static 'images/2.jpg' %}" alt="The 5 AM Club" class="rounded-lg mb-3">
      <h3 class="font-semibold">The 5 AM Club</h3>
      <p class="text-gray-600">Robin Sharma</p>
      <p class="text-sm text-red-600">Added: Mar 07, 2025</p>
    </a>
    
    <!-- Book 3 -->
    <a href="{% url 'book_cover3'  %}" class="book-card bg-white shadow-lg p-5 hover:shadow-2xl transition-shadow duration-300">
      <img src="{% static 'images/3.jpg' %}" alt="Educated" class="rounded-lg mb-3">
      <h3 class="font-semibold">Educated</h3>
      <p class="text-gray-600">Tara Westover</p>
      <p class="text-sm text-red-600">Added: Mar 06, 2025</p>
    </a>
    
  </div>
</div>





<!-- Testimonials Section -->
<div class="container mx-auto px-5 my-10 bg-gray-50 py-10 rounded-lg">
  <h2 class="text-2xl font-bold mb-6 text-center">What Our Readers Say</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="bg-white p-6 rounded-lg shadow">
      <p class="text-gray-600">"This e-library has transformed my reading habits!"</p>
      <p class="mt-3 font-semibold">Sarah K.</p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <p class="text-gray-600">"So many great books in one place. Love the variety!"</p>
      <p class="mt-3 font-semibold">James L.</p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <p class="text-gray-600">"The search feature makes finding books a breeze."</p>
      <p class="mt-3 font-semibold">Emily R.</p>
    </div>
  </div>
</div>

<!-- Footer -->
<div class="bg-gray-800 text-white mt-10 py-6">
  <div class="container mx-auto px-5 text-center">
    <p class="text-sm">¬© 2025 E-Library Portal. All rights reserved.</p>
    <div class="mt-3">
      <a href="#" class="text-gray-400 hover:text-white mx-2">About</a>
      <a href="#" class="text-gray-400 hover:text-white mx-2">Contact</a>
      <a href="#" class="text-gray-400 hover:text-white mx-2">Privacy Policy</a>
    </div>
  </div>
</div>





<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>
<style>
  .chat-scroll::-webkit-scrollbar {
    width: 10px;
  }
  .chat-scroll::-webkit-scrollbar-track {
    background: #f1f1f1;
  }
  .chat-scroll::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 3px;
  }
</style>
</head>

<div x-data="{ open: false }" class="fixed bottom-6 right-6 z-50">
  <!-- Chat bubble button -->
  <button x-show="!open" @click="open = true" class="bg-red-600 text-white p-4 rounded-full shadow-lg hover:bg-red-500 focus:outline-none">
    üí¨
  </button>

  <div x-show="open" x-transition x-cloak class="mt-2 w-[500px] h-[500px] bg-white rounded-xl shadow-xl flex flex-col overflow-hidden">
    <div class="flex items-center justify-between bg-red-600 p-4">
      <div class="flex items-center gap-3">
        <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD..." alt="Bot Avatar" class="w-10 h-10 rounded-full" />
        <div>
          <p class="font-semibold text-white">Chatbot</p>
          <p class="text-xs text-red-200">Online</p>
        </div>
      </div>
      <button @click="open = false" class="text-white text-2xl leading-none">&times;</button>
    </div>

    <div id="chatBox" class="flex-1 p-4 overflow-y-auto chat-scroll space-y-4 bg-gray-50">
      <div class="flex items-start">
        <img src="data:image/jpeg;base64,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" alt="Bot Avatar" class="w-8 h-8 rounded-full" />
        <div class="bg-red-100 text-gray-800 p-2 rounded-lg ml-2 max-w-[75%]">
          <p class="text-sm">Hi there! How can I help you today?</p>
        </div>
      </div>
    </div>

    <div class="p-4 bg-white border-t border-gray-200">
      <div class="flex items-center gap-2">
        <input type="text" id="userInput" placeholder="Type a message..." class="flex-1 p-2 rounded-full border border-gray-300 focus:outline-none focus:border-red-500" />
        <button id="sendBtn" class="bg-red-600 text-white p-2 rounded-full hover:bg-red-500 focus:outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 rotate-90" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10l9-7 9 7-9 7-9-7z" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<script type="module">
  document.addEventListener('DOMContentLoaded', () => {
    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    sendBtn.addEventListener('click', sendMessage);
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });

    function appendMessage(text, sender) {
      const messageWrapper = document.createElement('div');
      messageWrapper.classList.add('flex', 'items-start', 'space-x-2');
      const messageBubble = document.createElement('div');
      messageBubble.classList.add('p-2', 'rounded-lg', 'max-w-[75%]', 'text-sm');

      if (sender === 'user') {
        messageWrapper.classList.add('justify-end');
        messageBubble.classList.add('bg-red-600', 'text-white', 'rounded-br-none');
      } else {
        const avatar = document.createElement('img');
        avatar.src = 'data:image/jpeg;base64,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';
        avatar.alt = 'Bot Avatar';
        avatar.classList.add('w-8', 'h-8', 'rounded-full');
        messageWrapper.insertAdjacentElement('afterbegin', avatar);
        messageBubble.classList.add('bg-red-100', 'text-gray-800', 'rounded-bl-none');
      }

      messageBubble.innerHTML = text;
      messageWrapper.appendChild(messageBubble);
      chatBox.appendChild(messageWrapper);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;
      appendMessage(message, 'user');
      userInput.value = '';

      appendMessage('<em>Typing...</em>', 'bot');
      const typingIndicator = chatBox.lastElementChild;

      const botResponse = await getBotResponse(message);
      typingIndicator.remove();
      appendMessage(botResponse, 'bot');
    }

    async function getBotResponse(userMessage) {
      try {
        const response = await fetch('http://localhost:8080/send_message/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ user_message: userMessage }),
        });

        const data = await response.json();
        return data.bot_response || "Sorry, I didn't get that.";
      } catch (error) {
        console.error("Error fetching response:", error);
        return "Sorry, an error occurred.";
      }
    }
  });
</script>







<script>
let index = 0;
  const carousel = document.querySelector(".carousel-inner");
  const items = document.querySelectorAll(".carousel-item");
  const totalItems = items.length / 2; // Half because of duplication
  const itemWidth = items[0].offsetWidth;
  let interval;

  function moveCarousel() {
    index++;
    if (index >= totalItems) {
      setTimeout(() => {
        carousel.classList.add("no-transition");
        index = 0;
        carousel.style.transform = `translateX(-${index * itemWidth}px)`;
      }, 500);
    }
    carousel.classList.remove("no-transition");
    carousel.style.transform = `translateX(-${index * itemWidth}px)`;
  }

  function startCarousel() {
    interval = setInterval(moveCarousel, 2000);
  }

  startCarousel();
</script>

{% endblock %}